<!DOCTYPE html>
<html lang="en">
<!-- Header & Style-->
<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/5c6aab23a3.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>Vue.js Application</title>

</head>
<body>
    <div id="app">
        <header>
        <div class="d-flex justify-content-center">
            <h2>School Subjects</h2>
        </div>
   <button @click="toggleShowProduct"> 
      {{TotalItems}}
      <span class="fas fa-shopping-cart"></span>Cart
   </button>
</header>

<div v-if="showProduct">
    <div id="product" class="d-flex justify-content-center">
         <div class="card" style="width: 300px;">
            <img src="images/subject.png" class="card-img-top" alt="images for subject">
                <div class="card-body" >
                    <h5>Subject:{{product.subject}}</h5>
                    <h5>Location:{{product.location}}</h5>
                    <h5>Price: {{product.price}}</h5>
                    <h5>Spaces:{{spacesLeft}}</h5>
                </div>
                
                 <div class="text-right">
                    <button type="button" class="btn btn-primary" v-on:click="addToCart" v-if="canAddToCart">Add to
                        Cart</button>
                    <div v-else>
                      <button class="btn btn-primary disabled">Add to Cart</button>
                      <p>You have successfully added all items</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <div v-else> 
            <h1>Checkout page</h1>
        <p>
            <strong>Name: </strong>
            <input type="text" v-model="order.name">
        </p>
        <p>
            <strong>Surname: </strong>
            <input type="text" v-model="order.surname">
        </p>
        <p>
            <strong>Phone: </strong>
            <input type="tel" v-model="order.phone">
        </p>
      
        <h2>Information about Order</h2>
        <p>
            <strong>Name: </strong>{{order.name}}
        </p>
        <p>
            <strong>Surname: </strong>{{order.surname}}
        </p>
        <p>
            <strong>Phone: </strong>{{order.phone}}
        </p>
        <button @click="submitDetails">Place Order</button>
        </div>
    </div>
<script type="text/javascript">
            // Vue Object contains data
            var CartProduct = new Vue({
    
                el: "#app",
                data: {    
                    showProduct: true,
                    product: {
                        id: 1,
                        subject: 'Maths',
                        location: 'Harrow',
                        price: 'Â£179',
                        spaces: 5
    
                    },

                    cart: [],
                    order: {
                        name: "",
                        surname: "",
                        Phone: "",
                    }

},
// Methods to push the product-ID
methods: {
    addToCart: function () {
        this.cart.push(this.product.id);
    },
    toggleShowProduct() {
        this.showProduct = this.showProduct ? false : true;
    },
    submitDetails() {
        alert("Congratulations, we have recieved your order :)")
    }
},
//    functions : toCOUNT, TO AddTOCard and check spaceleft in card
computed: { 

        TotalItems: function () {
            return this.cart.length || '';

        },
        canAddToCart: function () {
            return this.product.spaces > this.TotalItems;
        },
        spacesLeft: function () {
            return (this.product.spaces - this.cart.length);
        },

    },


});
</script>


</body>
</html>

